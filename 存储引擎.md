### 存储引擎
P214
比较：


 空 | MyISAM | InnoDB 
 
 ----------- | ----------- | -- | -- 
 
 事务|否|是
 
 


#### 架构的相同之处
不管是哪种存储引擎，所有表都各自有个**.frm**文件，其中包含表定义（带有列名称、类型和大小、键信息和其他表信息）。实质上可收集和存储来自create table的信息。

服务器会读取.frm文件中的表定义，然后将其存储在所谓的**`表`高速缓存**中。通过这种方式下次需要访问表时，就不必重新读取和分析.frm文件，而是使用高速缓存的信息。


#### MyISAM
##### 架构
在本地磁盘上存储数据。其他两个附加文件：`.MYD`-数据文件  `.MYI`-索引文件

##### 数据文件
数据文件的格式相当简单。其实质是带有一些元信息的表记录的级联。
记录格式有两种：固定长度和可变长度。

**固定长度**记录以记录头开始，如果记录头的第1位指出已经删除，则随后的各位作为指针指向已删除记录链中的下一个已删除记录。已删除的记录链允许被插入的记录覆盖已删除的旧记录，而不是将新记录附加在文件的末尾。

紧跟这记录头的是按照表的列顺序排列的记录的列数值的级联。记录中整型和浮点型按照“小端”（低字节在前）的顺序存储。

**长度可变**第1个字节包含一个描述子类型和特殊代码。后续字节的含义随着各个子字节变化，但共同的主题是，将会有一系列包含下列内容的字节：记录长度、块中未使用的字节的数量、NULL值指示符标记，如果记录与事先创建的空间不匹配而必须拆分，可能还包含一个指向记录级联的指针。当删除了记录，而要再这个位置插入的新记录超过原记录的大小时，就可能发生最后一种情况。

##### 索引文件
包含一个对各种键和列属性进行说明的详细的记录头，同时包含大量元信息，之后是实际键页。
【图】

记录头包含下列区间类型：state、base keydef和recinfo.state和base区间仅出现一次，keydef区间为每个键出现一次，recinfo为每个键的每个域出现一次。
